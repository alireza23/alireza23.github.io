<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        #canvas{
            border: 2px black solid;
            touch-action: none;
        }
    </style>
</head>
<body>
    Tool:
    <select id="tool">
      <option value="brush">Brush</option>
      <option value="eraser">Eraser</option>
    </select>
    <canvas id="canvas"></canvas>
    <!-- <canvas id="c" width="500" height="300"></canvas> -->
    <!-- <script src="./canvas.js"></script> -->
    <script>
//   window.addEventListener("load", () => {
//   const canvas = document.getElementById("canvas");
//   const ctx = canvas.getContext("2d");
//   canvas.height = window.innerHeight - 8;
//   canvas.width = window.innerWidth - 8;
//   ctx.strokeStyle = "black";
//   ctx.lineWidth = 3;
//     ctx.shadowBlur = 1.5;
//     ctx.shadowColor = "rgb(0, 0, 0)";
//     ctx.lineJoin = "round";
//     ctx.lineCap = "round";
//   let painting = false;
//   let mode = 'brush'
//   function startPosition(e) {
//     painting = true;
//     draw(e);
//   }
//   function finishedPosition() {
//     painting = false;
//     ctx.beginPath();
//   }
//   function draw(e) {
//     if (!painting) return;
//     if(mode=='brush') {
//         ctx.globalCompositeOperation = 'source-over';
//         ctx.strokeStyle = 'black';
//         //ctx.lineWidth = 3;
//     } else {
//         ctx.globalCompositeOperation = 'destination-out';
//        // ctx.lineWidth = 10;
//     }
//     console.log(e)
//     console.log({'x': e.touches[0].clientX, 'y': e.touches[0].clientY})
//     ctx.lineTo(e.touches[0].clientX, e.touches[0].clientY);
//     ctx.stroke();
//   }
//   canvas.addEventListener("touchstart", startPosition);
//   canvas.addEventListener("touchend", finishedPosition);
//   canvas.addEventListener("touchmove", draw);
//   var select = document.getElementById("tool");
//   select.addEventListener("change", function () {
//     mode = select.value;
//   });
// });

window.addEventListener("load", () => {
function distanceBetween(point1, point2) {
    return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));
  }
  function angleBetween(point1, point2) {
    return Math.atan2( point2.x - point1.x, point2.y - point1.y );
  }
  var el = document.getElementById('c');
  el.height = window.innerHeight - 8;
  el.width = window.innerWidth - 8;
  var ctx = el.getContext('2d');
//ctx.globalCompositeOperation = "source-over"

  //ctx.globalAlpha = 1;
  ctx.lineJoin = ctx.lineCap = 'round';

  var isDrawing, lastPoint;
//e.touches[0].clientX, e.touches[0].clientY
  el.touchstart = function(e) {
    isDrawing = true;
    lastPoint = { x: e.touches[0].clientX, y: e.touches[0].clientY };
  };

  el.touchmove = function(e) {
    if (!isDrawing) return;

    var currentPoint = { x: e.touches[0].clientX, y: e.touches[0].clientY };
    var dist = distanceBetween(lastPoint, currentPoint);
    var angle = angleBetween(lastPoint, currentPoint);

    for (var i = 0; i < dist; i+=5) {

      x = lastPoint.x + (Math.sin(angle) * i);
      y = lastPoint.y + (Math.cos(angle) * i);

      var radgrad = ctx.createRadialGradient(x,y,10,x,y,20);

      radgrad.addColorStop(0, '#000');
      radgrad.addColorStop(0.5, 'rgba(0,0,0,0.5)');
      radgrad.addColorStop(1, 'rgba(0,0,0,0)');

      ctx.fillStyle = radgrad;
       ctx.fillRect(x-20, y-20, 40, 40);
    }

    lastPoint = currentPoint;
  };

  el.touchend = function() {
    isDrawing = false;
  };
})
    </script>
</body>
</html>